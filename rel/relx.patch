@@ -149,7 +149,7 @@
 fi
 
 # Extract the target node name from node.args
-NAME_ARG=$(egrep '^-s?name' "$VMARGS_PATH" || true)
+NAME_ARG=${NAME_ARG:-$(egrep '^-s?name' "$VMARGS_PATH" || true)}
 if [ -z "$NAME_ARG" ]; then
     echo "vm.args needs to have either -name or -sname parameter."
     exit 1
@@ -162,7 +162,7 @@
 PIPE_DIR="${PIPE_DIR:-/tmp/erl_pipes/$NAME/}"
 
 # Extract the target cookie
-COOKIE_ARG="$(grep '^-setcookie' "$VMARGS_PATH" || true)"
+COOKIE_ARG="${COOKIE_ARG:-$(grep '^-setcookie' "$VMARGS_PATH" || true)}"
 if [ -z "$COOKIE_ARG" ]; then
     echo "vm.args needs to have a -setcookie parameter."
     exit 1
@@ -374,6 +374,7 @@
         set -- "$BINDIR/erlexec" -boot "$BOOTFILE" -mode "$CODE_LOADING_MODE" \
             -boot_var ERTS_LIB_DIR "$ERTS_LIB_DIR" \
             -config "$RELX_CONFIG_PATH" \
+            $NAME_ARG \
             -args_file "$VMARGS_PATH"
 
         # Dump environment info for logging purposes
@@ -410,6 +411,7 @@
         set -- "$BINDIR/erlexec" $FOREGROUNDOPTIONS \
             -boot "$REL_DIR/$BOOTFILE" -mode "$CODE_LOADING_MODE" -config "$RELX_CONFIG_PATH" \
             -boot_var ERTS_LIB_DIR "$ERTS_LIB_DIR" \
+            $NAME_ARG \
             -args_file "$VMARGS_PATH"
 
         # Dump environment info for logging purposes
