{
    "_id": "_design/rate_limits"
    ,"language": "javascript"
    ,"views": {
        "crossbar_listing": {
            "map": "function(doc) { if (doc.pvt_type != 'account' || doc.pvt_deleted) return; if (doc.pvt_type == 'account') { if (doc.rate_limits != null) { limits = doc.rate_limits.account || doc.rate_limits.own; for (key in limits.per_minute) { emit([doc.realm, key], { 'type': doc.pvt_type, 'per_minute': limits.per_minute[key] }) }; for (key in limits.per_second) { emit([doc.realm, key], { 'type': doc.pvt_type, 'per_second': limits.per_second[key] }) }; } else { emit([doc.realm, 'fallback'], { 'type': doc.pvt_type, 'parents': doc.pvt_tree }) } } };"
        }
    }
}
