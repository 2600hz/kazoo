{
    "_id": "_design/services",
    "language": "javascript",
    "views": {
        "conferences": {
            "map": "function(doc) { if (doc.pvt_type != 'conference' || doc.pvt_deleted || doc.enabled == false) return; emit('conference', 1); }",
            "reduce": "_sum"
        },
        "devices": {
            "map": "function(doc) { if (doc.pvt_type != 'device' || doc.pvt_deleted || doc.enabled == false) return; emit(doc.device_type || 'sip_device', 1); }",
            "reduce": "_sum"
        },
        "faxes": {
            "map": "function(doc) { if (doc.pvt_type != 'faxbox' || doc.pvt_deleted || doc.enabled == false) return; emit('faxbox', 1); }",
            "reduce": "_sum"
        },
        "object_plans": {
            "map": "function(doc) { if(!doc.service || !doc.service.plans || doc.pvt_deleted) return; emit(doc.pvt_type, doc.service.plans); }"
        },
        "opaque_billing": {
            "map": "function(doc) { if(!doc.billing || doc.pvt_deleted) return; for (index in doc.billing) emit( index, doc.billing[index] ); }",
            "reduce": "_sum"
        },
        "users": {
            "map": "function(doc) { if (doc.pvt_type != 'user' || doc.pvt_deleted || doc.enabled == false) return; emit(doc.priv_level || 'user', 1); }",
            "reduce": "_sum"
        },
        "voicemails": {
            "map": "function(doc) { if (doc.pvt_type != 'vmbox' || doc.pvt_deleted || doc.enabled == false) return; emit('vmbox', 1); }",
            "reduce": "_sum"
        }
    }
}
